---
title: 面试NOSQL篇
layout: post
categories: 面试
tags: 面试
excerpt: 面试
---
##### JAVA面试大纲-NOSQL篇
##### NOSQL概念   
NoSQL最常见的解释是“non-relational”， “Not Only SQL”也被很多人接受。NoSQL仅仅是一个概念，泛指非关系型的数据库，区别于关系数据库，它们不保证关系数据的ACID特性   
#### NOSQL优点   
NoSQL有如下优点：易扩展，NoSQL数据库种类繁多，但是一个共同的特点都是去掉关系数据库的关系型特性。数据之间无关系，这样就非常容易扩展。无形之间也在架构的层面上带来了可扩展的能力。大数据量，高性能，NoSQL数据库都具有非常高的读写性能，尤其在大数据量下，同样表现优秀。这得益于它的无关系性，数据库的结构简单   
#### 分类   
1. 键值(Key-Value)存储数据库   
这一类数据库主要会使用到一个哈希表，这个表中有一个特定的键和一个指针指向特定的数据。Key/value模型对于IT系统来说的优势在于简单、易部署。但是如果数据库管理员(DBA)只对部分值进行查询或更新的时候，Key/value就显得效率低下了。举例如：Tokyo Cabinet/Tyrant， Redis， Voldemort， Oracle BDB。
2. 列存储数据库   
这部分数据库通常是用来应对分布式存储的海量数据。键仍然存在，但是它们的特点是指向了多个列。这些列是由列家族来安排的。如：Cassandra， HBase， Riak.
3. 文档型数据库   
文档型数据库的灵感是来自于Lotus Notes办公软件的，而且它同第一种键值存储相类似。该类型的数据模型是版本化的文档，半结构化的文档以特定的格式存储，比如JSON。文档型数据库可以看作是键值数据库的升级版，允许之间嵌套键值，在处理网页等复杂数据时，文档型数据库比传统键值数据库的查询效率更高。如：CouchDB， MongoDb. 国内也有文档型数据库SequoiaDB，已经开源。
4. 图形(Graph)数据库   
图形结构的数据库同其他行列以及刚性结构的SQL数据库不同，它是使用灵活的图形模型，并且能够扩展到多个服务器上。NoSQL数据库没有标准的查询语言(SQL)，因此进行数据库查询需要制定数据模型。许多NoSQL数据库都有REST式的数据接口或者查询API。如：Neo4J， InfoGrid， Infinite Graph。   
#### 常用的NOSQL数据库   
1. 什么是redis？
答：redis是使用C语言编写的典型的NoSQL数据库，它是一个key-value存储系统，数据存储在内存中，所以存取速度非常快。
2. 为什么redis要把数据放到内存中？
答：Redis为了达到最快的读写速度将数据都读到内存中，并定期将数据写入磁盘。如果不将数据放在磁盘中，会严重影响 redis 的性能。
3. redis支持哪些数据类型？
答：redis有5种基本数据类型，分别是String(字符串)、Hash(字典)、List(列表)、Set(集合)、Zset(有序集合)。
4. 说说redis的优缺点。
答：优缺点如下：
(1). 优点：
	• 由于是基于内存的，所以性能极高。
	• 支持丰富的数据类型。
	• Redis 的所有操作都是原子性的。
(2). 缺点：
	• 由于是内存数据库，所以单台机器存储的数据量，跟机器本身的内存大小。
	• 如果进行完整重同步，由于需要生成 rdb 文件并进行传输，会占用主机的 CPU，消耗带宽。   
redis和memcache和MongoDB的区别   
1. 性能
都比较高，性能对我们来说应该都不是瓶颈
总体来讲，TPS方面redis和memcache差不多，要大于mongodb
2. 操作的便利性
memcache数据结构单一
redis丰富一些，数据操作方面，redis更好一些，较少的网络IO次数
mongodb支持丰富的数据表达，索引，最类似关系型数据库，支持的查询语言非常丰富
3. 内存空间的大小和数据量的大小
redis在2.0版本后增加了自己的VM特性，突破物理内存的限制；可以对key value设置过期时间（类似memcache）
memcache可以修改最大可用内存,采用LRU算法
mongoDB适合大数据量的存储，依赖操作系统VM做内存管理，吃内存也比较厉害，服务不要和别的服务在一起
4. 可用性（单点问题）
对于单点问题，
redis，依赖客户端来实现分布式读写；主从复制时，每次从节点重新连接主节点都要依赖整个快照,无增量复制，因性能和效率问题，
所以单点问题比较复杂；不支持自动sharding,需要依赖程序设定一致hash 机制。
一种替代方案是，不用redis本身的复制机制，采用自己做主动复制（多份存储），或者改成增量复制的方式（需要自己实现），一致性问题和性能的权衡
Memcache本身没有数据冗余机制，也没必要；对于故障预防，采用依赖成熟的hash或者环状的算法，解决单点故障引起的抖动问题。
mongoDB支持master-slave,replicaset（内部采用paxos选举算法，自动故障恢复）,auto sharding机制，对客户端屏蔽了故障转移和切分机制。
5. 可靠性（持久化）
对于数据持久化和数据恢复，
redis支持（快照、AOF）：依赖快照进行持久化，aof增强了可靠性的同时，对性能有所影响
memcache不支持，通常用在做缓存,提升性能；
MongoDB从1.8版本开始采用binlog方式支持持久化的可靠性
6. 数据一致性（事务支持）
Memcache 在并发场景下，用cas保证一致性---------- CAS（比较与交换，Compare and swap） 是一种有名的无锁算法

redis事务支持比较弱，只能保证事务中的每个操作连续执行   
mongoDB不支持事务   
7. 数据分析
mongoDB内置了数据分析的功能(mapreduce),其他不支持
8. 应用场景
redis：数据量较小的更性能操作和运算上
memcache：用于在动态系统中减少数据库负载，提升性能;做缓存，提高性能（适合读多写少，对于数据量比较大，可以采用sharding）
MongoDB:主要解决海量数据的访问效率问题      
[常见redis面试题总结](http://youzhixueyuan.com/redis-interview-question-49-answers.html)





 









 




   

